
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Tensors &#8212; Materialite</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'demos/tensors';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Crystallography" href="crystallography.html" />
    <link rel="prev" title="Regional Fields" href="regional_fields.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="Materialite - Home"/>
    <img src="../_static/logo.png" class="logo__image only-dark pst-js-only" alt="Materialite - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Materialite (Alpha Release)
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="simple_example.html">Simple Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="material_basics.html">Material Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="material_plot.html">Material Plotting</a></li>
<li class="toctree-l1"><a class="reference internal" href="material_phase.html">Material Phases</a></li>
<li class="toctree-l1"><a class="reference internal" href="regional_fields.html">Regional Fields</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Demos</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Tensors</a></li>
<li class="toctree-l1"><a class="reference internal" href="crystallography.html">Crystallography</a></li>
<li class="toctree-l1"><a class="reference internal" href="ipf_example.html">IPF Coloring</a></li>
<li class="toctree-l1"><a class="reference internal" href="constitutive_models.html">Constitutive Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="convolution.html">Convolution Thermal</a></li>
<li class="toctree-l1"><a class="reference internal" href="grain_coarsening.html">Grain Coarsening</a></li>
<li class="toctree-l1"><a class="reference internal" href="laser_pathing.html">AM Laser Pathing</a></li>
<li class="toctree-l1"><a class="reference internal" href="convolution_microstructure.html">AM Microstucture</a></li>
<li class="toctree-l1"><a class="reference internal" href="model_making.html">Creating New Models</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../api_reference.html">Modules</a></li>


</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/nasa/materialite" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/nasa/materialite/edit/main/docs/_sources/demos/tensors.ipynb" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/nasa/materialite/issues/new?title=Issue%20on%20page%20%2Fdemos/tensors.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/demos/tensors.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>

</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Tensors</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="tensors">
<h1>Tensors<a class="headerlink" href="#tensors" title="Link to this heading">#</a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">materialite</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">Material</span><span class="p">,</span>
    <span class="n">Orientation</span><span class="p">,</span>
    <span class="n">Scalar</span><span class="p">,</span>
    <span class="n">Order2Tensor</span><span class="p">,</span>
    <span class="n">Order2SymmetricTensor</span><span class="p">,</span>
    <span class="n">Order4SymmetricTensor</span><span class="p">,</span>
    <span class="n">Vector</span><span class="p">,</span>
    <span class="n">SlipSystem</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Tensor</span></code>s in Materialite are intended to simplify tensor operations, which often require careful tracking of array dimensions and special handling depending on whether the array represents a single tensor or a group of tensors (e.g., at all the points in a material). Specific classes are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Scalar</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Vector</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Order2Tensor</span></code>: non-symmetric second-order tensors</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Order2SymmetricTensor</span></code>: symmetric second-order tensors.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Order4SymmetricTensor</span></code>: fourth-order tensors with major and minor symmetries (e.g., stiffness tensors)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Orientation</span></code>: represents basis transformations</p></li>
</ul>
<p>This demo walks through tensor operations, including individual tensors and groups of tensors, which are all handled by the above classes.</p>
<p>Create a displacement gradient for simple shear</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">displacement_gradient_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>
<span class="n">displacement_gradient</span> <span class="o">=</span> <span class="n">Order2Tensor</span><span class="p">(</span><span class="n">displacement_gradient_array</span><span class="p">)</span>
<span class="n">displacement_gradient</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Order2Tensor([[0. 1. 0.]
 [0. 0. 0.]
 [0. 0. 0.]], dims: (), components shape: (3, 3))
</pre></div>
</div>
</div>
</div>
<p>Recover the numpy array by asking for the tensor components</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">displacement_gradient</span><span class="o">.</span><span class="n">components</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[0., 1., 0.],
       [0., 0., 0.],
       [0., 0., 0.]])
</pre></div>
</div>
</div>
</div>
<p>The infinitesimal strain tensor is the symmetric part of the displacement gradient</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">strain</span> <span class="o">=</span> <span class="n">displacement_gradient</span><span class="o">.</span><span class="n">sym</span>
<span class="n">strain</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Order2SymmetricTensor([0.         0.         0.         0.         0.         0.70710678], dims: (), components shape: (6,))
</pre></div>
</div>
</div>
</div>
<p>The default representation of an <code class="docutils literal notranslate"><span class="pre">Order2SymmetricTensor</span></code> is the Mandel components. We can extract the Cartesian components instead if we want.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">strain</span><span class="o">.</span><span class="n">cartesian</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[0. , 0.5, 0. ],
       [0.5, 0. , 0. ],
       [0. , 0. , 0. ]])
</pre></div>
</div>
</div>
</div>
<p>…or the Voigt components. Note that we need to specify <code class="docutils literal notranslate"><span class="pre">strain_voigt</span></code> to get the correct representation (i.e., shear components multiplied by two)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">strain</span><span class="o">.</span><span class="n">strain_voigt</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([0., 0., 0., 0., 0., 1.])
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">stress_voigt</span></code> returns the stress Voigt representation (shear components not multiplied by two)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">strain</span><span class="o">.</span><span class="n">stress_voigt</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([0. , 0. , 0. , 0. , 0. , 0.5])
</pre></div>
</div>
</div>
</div>
<p>We can construct an <code class="docutils literal notranslate"><span class="pre">Order2SymmetricTensor</span></code> from these different component representations too.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">strain2</span> <span class="o">=</span> <span class="n">Order2SymmetricTensor</span><span class="p">(</span><span class="n">strain</span><span class="o">.</span><span class="n">components</span><span class="p">)</span>
<span class="n">strain3</span> <span class="o">=</span> <span class="n">Order2SymmetricTensor</span><span class="o">.</span><span class="n">from_mandel</span><span class="p">(</span><span class="n">strain</span><span class="o">.</span><span class="n">components</span><span class="p">)</span>
<span class="n">strain4</span> <span class="o">=</span> <span class="n">Order2SymmetricTensor</span><span class="o">.</span><span class="n">from_strain_voigt</span><span class="p">(</span><span class="n">strain</span><span class="o">.</span><span class="n">strain_voigt</span><span class="p">)</span>
<span class="n">strain5</span> <span class="o">=</span> <span class="n">Order2SymmetricTensor</span><span class="o">.</span><span class="n">from_stress_voigt</span><span class="p">(</span><span class="n">strain</span><span class="o">.</span><span class="n">stress_voigt</span><span class="p">)</span>
<span class="n">strain6</span> <span class="o">=</span> <span class="n">Order2SymmetricTensor</span><span class="o">.</span><span class="n">from_cartesian</span><span class="p">(</span><span class="n">strain</span><span class="o">.</span><span class="n">cartesian</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">strain</span><span class="o">.</span><span class="n">components</span><span class="p">,</span> <span class="n">strain2</span><span class="o">.</span><span class="n">components</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">strain</span><span class="o">.</span><span class="n">components</span><span class="p">,</span> <span class="n">strain3</span><span class="o">.</span><span class="n">components</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">strain</span><span class="o">.</span><span class="n">components</span><span class="p">,</span> <span class="n">strain4</span><span class="o">.</span><span class="n">components</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">strain</span><span class="o">.</span><span class="n">components</span><span class="p">,</span> <span class="n">strain5</span><span class="o">.</span><span class="n">components</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">strain</span><span class="o">.</span><span class="n">components</span><span class="p">,</span> <span class="n">strain6</span><span class="o">.</span><span class="n">components</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
True
True
True
True
</pre></div>
</div>
</div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">from_cartesian</span></code> raises an error if the provided numpy array is not symmetric</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">_</span> <span class="o">=</span> <span class="n">Order2SymmetricTensor</span><span class="o">.</span><span class="n">from_cartesian</span><span class="p">(</span><span class="n">displacement_gradient_array</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Message: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Error: ValueError
Message: tried to create Order2SymmetricTensor using non-symmetric input
</pre></div>
</div>
</div>
</div>
<p>For solid mechanics problems, we need stiffness tensors too. These are <code class="docutils literal notranslate"><span class="pre">Order4SymmetricTensor</span></code>s in Materialite. Here, we’ll create a stiffness tensor for a material with cubic symmetry.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">stiffness_tensor</span> <span class="o">=</span> <span class="n">Order4SymmetricTensor</span><span class="o">.</span><span class="n">from_cubic_constants</span><span class="p">(</span>
    <span class="n">C11</span><span class="o">=</span><span class="mi">250000</span><span class="p">,</span> <span class="n">C12</span><span class="o">=</span><span class="mi">140000</span><span class="p">,</span> <span class="n">C44</span><span class="o">=</span><span class="mi">100000</span>
<span class="p">)</span>
<span class="n">stiffness_tensor</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Order4SymmetricTensor([[250000. 140000. 140000.      0.      0.      0.]
 [140000. 250000. 140000.      0.      0.      0.]
 [140000. 140000. 250000.      0.      0.      0.]
 [     0.      0.      0. 200000.      0.      0.]
 [     0.      0.      0.      0. 200000.      0.]
 [     0.      0.      0.      0.      0. 200000.]], dims: (), components shape: (6, 6))
</pre></div>
</div>
</div>
</div>
<p>Again, the default representation is the Mandel components. We can also ask for the Voigt components.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">stiffness_tensor</span><span class="o">.</span><span class="n">voigt</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[250000., 140000., 140000.,      0.,      0.,      0.],
       [140000., 250000., 140000.,      0.,      0.,      0.],
       [140000., 140000., 250000.,      0.,      0.,      0.],
       [     0.,      0.,      0., 100000.,      0.,      0.],
       [     0.,      0.,      0.,      0., 100000.,      0.],
       [     0.,      0.,      0.,      0.,      0., 100000.]])
</pre></div>
</div>
</div>
</div>
<p>We can also create stiffness tensors for other materials:</p>
<ul class="simple">
<li><p>Isotropic: <code class="docutils literal notranslate"><span class="pre">Order4SymmetricTensor.from_isotropic_constants(modulus,</span> <span class="pre">shear_modulus)</span></code></p></li>
<li><p>Transversely isotropic (e.g., hexagonal close-packed materials): <code class="docutils literal notranslate"><span class="pre">Order4SymmetricTensor.from_transverse_isotropic_constants(C11,</span> <span class="pre">C12,</span> <span class="pre">C13,</span> <span class="pre">C33,</span> <span class="pre">C44)</span></code></p></li>
<li><p>Any stiffness tensor where you have the Voigt components in a Numpy array: <code class="docutils literal notranslate"><span class="pre">Order4SymmetricTensor.from_voigt(voigt_stiffness_matrix)</span></code></p></li>
</ul>
<p>Now let’s do some tensor operations. First, get the stress from the stiffness tensor and the strain: <span class="math notranslate nohighlight">\(\mathbf{\sigma}\)</span> = <span class="math notranslate nohighlight">\(\mathbb{C} \mathbf{\varepsilon}\)</span> or, in index notation, <span class="math notranslate nohighlight">\(\sigma_{ij} = C_{ijkl} \varepsilon_{kl}\)</span>. Tensor applications use the <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> operator.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">stress</span> <span class="o">=</span> <span class="n">stiffness_tensor</span> <span class="o">@</span> <span class="n">strain</span>
<span class="n">stress</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Order2SymmetricTensor([     0.              0.              0.              0.
      0.         141421.35623731], dims: (), components shape: (6,))
</pre></div>
</div>
</div>
</div>
<p>We can also do inner products like <span class="math notranslate nohighlight">\(\mathbf{\sigma} : \mathbf{\varepsilon}\)</span> or, in index notation, <span class="math notranslate nohighlight">\(\sigma_{ij} \varepsilon_{ij}\)</span>, using the <code class="docutils literal notranslate"><span class="pre">*</span></code> operator. This returns a <code class="docutils literal notranslate"><span class="pre">Scalar</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">stress</span> <span class="o">*</span> <span class="n">strain</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Scalar(99999.99999999996, dims: (), components shape: ())
</pre></div>
</div>
</div>
</div>
<p>Similarly, we can apply <code class="docutils literal notranslate"><span class="pre">Order2SymmetricTensor</span></code>s or <code class="docutils literal notranslate"><span class="pre">Order2Tensor</span></code>s to <code class="docutils literal notranslate"><span class="pre">Vector</span></code>s. Here, determine the traction vector on a particular surface:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">surface_normal</span> <span class="o">=</span> <span class="n">Vector</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">])</span><span class="o">.</span><span class="n">unit</span>
<span class="n">traction</span> <span class="o">=</span> <span class="n">stress</span> <span class="o">@</span> <span class="n">surface_normal</span>
<span class="n">traction</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Vector([57735.02691896 57735.02691896     0.        ], dims: (), components shape: (3,))
</pre></div>
</div>
</div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">.unit</span></code> converted the <code class="docutils literal notranslate"><span class="pre">surface_normal</span></code> vector to a unit vector:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">surface_normal</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Vector([0.57735027 0.57735027 0.57735027], dims: (), components shape: (3,))
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Tensor</span></code>s are most useful for doing tensor operations when you have multidimensional data. In Materialite, the dimensions are the points of the material and the slip systems that are available at each point. First, set up tensors with a points dimension.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">displacement_gradients_array</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
        <span class="p">[</span><span class="n">displacement_gradient_array</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="o">-</span><span class="mf">0.3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.3</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])]</span>
    <span class="p">)</span>
    <span class="o">*</span> <span class="mf">0.001</span>
<span class="p">)</span>
<span class="n">displacement_gradients</span> <span class="o">=</span> <span class="n">Order2Tensor</span><span class="p">(</span><span class="n">displacement_gradients_array</span><span class="p">)</span>
<span class="n">displacement_gradients</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Order2Tensor([[[ 0.      0.001   0.    ]
  [ 0.      0.      0.    ]
  [ 0.      0.      0.    ]]

 [[-0.0003  0.      0.    ]
  [ 0.     -0.0003  0.    ]
  [ 0.      0.      0.001 ]]], dims: (points), components shape: (2, 3, 3))
</pre></div>
</div>
</div>
</div>
<p>Operations we looked at previously remain the same.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">strains</span> <span class="o">=</span> <span class="n">displacement_gradients</span><span class="o">.</span><span class="n">sym</span>
<span class="n">strains</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Order2SymmetricTensor([[ 0.          0.          0.          0.          0.          0.00070711]
 [-0.0003     -0.0003      0.001       0.          0.          0.        ]], dims: (points), components shape: (2, 6))
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">stresses</span> <span class="o">=</span> <span class="n">stiffness_tensor</span> <span class="o">@</span> <span class="n">strains</span>
<span class="n">stresses</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Order2SymmetricTensor([[  0.           0.           0.           0.           0.
  141.42135624]
 [ 23.          23.         166.           0.           0.
    0.        ]], dims: (points), components shape: (2, 6))
</pre></div>
</div>
</div>
</div>
<p>Note that no special broadcasting operations were needed to make the <code class="docutils literal notranslate"><span class="pre">stiffness_tensor</span></code> (which has no points dimension) work correctly with <code class="docutils literal notranslate"><span class="pre">strains</span></code> (which has a points dimension).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">stresses</span> <span class="o">*</span> <span class="n">strains</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Scalar([0.1    0.1522], dims: (points), components shape: (2,))
</pre></div>
</div>
</div>
</div>
<p>We can do other useful operations like extracting the deviatoric part of a tensor or taking the norm.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">stresses</span><span class="o">.</span><span class="n">dev</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Order2SymmetricTensor([[  0.           0.           0.           0.           0.
  141.42135624]
 [-47.66666667 -47.66666667  95.33333333   0.           0.
    0.        ]], dims: (points), components shape: (2, 6))
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">stresses</span><span class="o">.</span><span class="n">dev</span><span class="o">.</span><span class="n">norm</span>  <span class="c1"># note that this returns a Scalar with a points dimension</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Scalar([141.42135624 116.75901107], dims: (points), components shape: (2,))
</pre></div>
</div>
</div>
</div>
<p>Here is the von Mises stress</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">3</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">stresses</span><span class="o">.</span><span class="n">dev</span><span class="o">.</span><span class="n">norm</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Scalar([173.20508076 143.        ], dims: (points), components shape: (2,))
</pre></div>
</div>
</div>
</div>
<p>We can also take the mean over all the points. Note that <code class="docutils literal notranslate"><span class="pre">mean()</span></code> requires parenthesis.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">stresses</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Order2SymmetricTensor([11.5        11.5        83.          0.          0.         70.71067812], dims: (), components shape: (6,))
</pre></div>
</div>
</div>
</div>
<p>For crystal plasticity operations, we will also need to work with a slip systems dimension. This typically comes from the Schmid tensor. In Materialite, the <code class="docutils literal notranslate"><span class="pre">SlipSystem</span></code> class can automatically create the Schmid tensor for common slip system families.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">slip_systems</span> <span class="o">=</span> <span class="n">SlipSystem</span><span class="o">.</span><span class="n">octahedral</span><span class="p">()</span>
<span class="n">schmid_tensor</span> <span class="o">=</span> <span class="n">slip_systems</span><span class="o">.</span><span class="n">schmid_tensor</span><span class="o">.</span><span class="n">sym</span>
<span class="n">schmid_tensor</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Order2SymmetricTensor([[ 0.          0.40824829 -0.40824829  0.          0.28867513  0.28867513]
 [ 0.40824829  0.         -0.40824829  0.28867513  0.          0.28867513]
 [ 0.40824829 -0.40824829  0.          0.28867513 -0.28867513  0.        ]
 [ 0.         -0.40824829  0.40824829  0.         -0.28867513  0.28867513]
 [ 0.40824829  0.         -0.40824829 -0.28867513  0.         -0.28867513]
 [ 0.40824829 -0.40824829  0.         -0.28867513 -0.28867513  0.        ]
 [ 0.         -0.40824829  0.40824829  0.          0.28867513  0.28867513]
 [ 0.40824829  0.         -0.40824829  0.28867513  0.         -0.28867513]
 [ 0.40824829 -0.40824829  0.          0.28867513  0.28867513  0.        ]
 [ 0.          0.40824829 -0.40824829  0.         -0.28867513  0.28867513]
 [ 0.40824829  0.         -0.40824829 -0.28867513  0.          0.28867513]
 [ 0.40824829 -0.40824829  0.         -0.28867513  0.28867513  0.        ]], dims: (slip systems), components shape: (12, 6))
</pre></div>
</div>
</div>
</div>
<p>Note that the Schmid tensor has a “slip systems” dimension.</p>
<p>Now, suppose our two points from earlier are in a crystal with octahedral slip systems. We can easily compute the resolved shear stress on each slip system at each point. Note that we have two points and 12 slip systems.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resolved_shear_stresses</span> <span class="o">=</span> <span class="n">schmid_tensor</span> <span class="o">*</span> <span class="n">stresses</span>
<span class="n">resolved_shear_stresses</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Scalar([[ 4.08248290e+01  4.08248290e+01  0.00000000e+00  4.08248290e+01
  -4.08248290e+01  0.00000000e+00  4.08248290e+01 -4.08248290e+01
   0.00000000e+00  4.08248290e+01  4.08248290e+01  0.00000000e+00]
 [-5.83795055e+01 -5.83795055e+01  1.77635684e-15  5.83795055e+01
  -5.83795055e+01  1.77635684e-15  5.83795055e+01 -5.83795055e+01
   1.77635684e-15 -5.83795055e+01 -5.83795055e+01  1.77635684e-15]], dims: (points, slip systems), components shape: (2, 12))
</pre></div>
</div>
</div>
</div>
<p>Now let’s set up a viscoplastic constitutive law and compute the slip rates on each slip system from <span class="math notranslate nohighlight">\(\dot{\gamma}_s = \dot{\gamma}_0 \left(\frac{\tau_s}{g_s} \right)^{m-1} \left(\frac{\tau_s}{g_s} \right)\)</span>. Numbers that stay constant can just be regular numbers, but we’ll make the slip resistance a <code class="docutils literal notranslate"><span class="pre">Scalar</span></code> so that it can be updated. Note that all of the slip rates on every slip system at every point are computed at once.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">hardening_rate</span> <span class="o">=</span> <span class="mf">10.0</span>
<span class="n">reference_slip_rate</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">slip_resistance</span> <span class="o">=</span> <span class="n">Scalar</span><span class="p">(</span><span class="mf">100.0</span><span class="p">)</span>
<span class="n">rate_exponent</span> <span class="o">=</span> <span class="mf">10.0</span>
<span class="n">plastic_slip_rates</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">reference_slip_rate</span>
    <span class="o">*</span> <span class="p">(</span><span class="n">resolved_shear_stresses</span> <span class="o">/</span> <span class="n">slip_resistance</span><span class="p">)</span><span class="o">.</span><span class="n">abs</span> <span class="o">**</span> <span class="p">(</span><span class="n">rate_exponent</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
    <span class="o">*</span> <span class="p">(</span><span class="n">resolved_shear_stresses</span> <span class="o">/</span> <span class="n">slip_resistance</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">plastic_slip_rates</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Scalar([[ 1.28600823e-004  1.28600823e-004  0.00000000e+000  1.28600823e-004
  -1.28600823e-004  0.00000000e+000  1.28600823e-004 -1.28600823e-004
   0.00000000e+000  1.28600823e-004  1.28600823e-004  0.00000000e+000]
 [-4.59837222e-003 -4.59837222e-003  3.12825484e-168  4.59837222e-003
  -4.59837222e-003  3.12825484e-168  4.59837222e-003 -4.59837222e-003
   3.12825484e-168 -4.59837222e-003 -4.59837222e-003  3.12825484e-168]], dims: (points, slip systems), components shape: (2, 12))
</pre></div>
</div>
</div>
</div>
<p>Now we can compute the plastic strain rates at each point: <span class="math notranslate nohighlight">\(\dot{\mathbf{\varepsilon}}_p = \sum_s \mathbf{M}_s \dot{\gamma}_s\)</span>. Recall that the Schmid tensor is an <code class="docutils literal notranslate"><span class="pre">Order2SymmetricTensor</span></code> with a “points” dimension and the plastic slip rates are a <code class="docutils literal notranslate"><span class="pre">Scalar</span></code> with a “points” and a “slip systems” dimension. Therefore, the product will be an <code class="docutils literal notranslate"><span class="pre">Order2SymmetricTensor</span></code> with “points” and “slip systems” dimensions.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plastic_strain_rates</span> <span class="o">=</span> <span class="p">(</span><span class="n">schmid_tensor</span> <span class="o">*</span> <span class="n">plastic_slip_rates</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">plastic_strain_rates</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Order2SymmetricTensor([[ 0.00000000e+000  0.00000000e+000  0.00000000e+000  0.00000000e+000
   0.00000000e+000  2.96990879e-004]
 [-7.50911039e-003 -7.50911039e-003  1.50182208e-002 -9.03049386e-169
   9.03049386e-169  2.16840434e-019]], dims: (points), components shape: (2, 6))
</pre></div>
</div>
</div>
</div>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">sum</span></code> method automatically sums over the “slip systems” dimension if it exists. This behavior can also be specified explicitly.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">schmid_tensor</span> <span class="o">*</span> <span class="n">plastic_slip_rates</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="s2">&quot;s&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Order2SymmetricTensor([[ 0.00000000e+000  0.00000000e+000  0.00000000e+000  0.00000000e+000
   0.00000000e+000  2.96990879e-004]
 [-7.50911039e-003 -7.50911039e-003  1.50182208e-002 -9.03049386e-169
   9.03049386e-169  2.16840434e-019]], dims: (points), components shape: (2, 6))
</pre></div>
</div>
</div>
</div>
<p>Finally, update the slip resistances using a simple linear hardening law with the accumulated slip at each point: <span class="math notranslate nohighlight">\(g_s = g_{s,\text{old}} + H \Delta t \sum_s |\dot{\gamma}_s|\)</span></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">delta_t</span> <span class="o">=</span> <span class="mf">0.001</span>
<span class="n">new_slip_resistances</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">slip_resistance</span> <span class="o">+</span> <span class="n">hardening_rate</span> <span class="o">*</span> <span class="n">plastic_slip_rates</span><span class="o">.</span><span class="n">abs</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">*</span> <span class="n">delta_t</span>
<span class="p">)</span>
<span class="n">new_slip_resistances</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Scalar([100.00001029 100.00036787], dims: (points), components shape: (2,))
</pre></div>
</div>
</div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">new_slip_resistances</span></code> has a points dimension since the accumulated slip was calculated at each point. In other words, at each point, we have computed the new CRSS across all 12 slip systems. <code class="docutils literal notranslate"><span class="pre">new_slip_resistances</span></code> would also have a slip systems dimension if the hardening law computed different CRSS increments for each slip system. We also used the <code class="docutils literal notranslate"><span class="pre">abs</span></code> property of a <code class="docutils literal notranslate"><span class="pre">Scalar</span></code> to take the absolute value of the slip rates.</p>
<p>Generally, points will belong to different crystals that may have different orientations. All <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>s (except <code class="docutils literal notranslate"><span class="pre">Scalar</span></code>s) are equipped with <code class="docutils literal notranslate"><span class="pre">to_crystal_frame()</span></code> and <code class="docutils literal notranslate"><span class="pre">to_specimen_frame()</span></code> methods to handle coordinate transformations. The only argument to the method is an <code class="docutils literal notranslate"><span class="pre">Orientation</span></code> object, which can contain a single orientation or a group of orientations just like <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>s. <code class="docutils literal notranslate"><span class="pre">Orientation</span></code>s represent a basis transformation between a specimen reference frame and a crystal reference frame. There is more detail on creating and using <code class="docutils literal notranslate"><span class="pre">Orientation</span></code>s in <a class="reference internal" href="crystallography.html"><span class="doc std std-doc">Crystallography</span></a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rng</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">default_rng</span><span class="p">(</span><span class="mi">12345</span><span class="p">)</span>
<span class="n">orientations</span> <span class="o">=</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">num</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">rng</span><span class="o">=</span><span class="n">rng</span><span class="p">)</span>
<span class="n">specimen_frame_stiffnesses</span> <span class="o">=</span> <span class="n">stiffness_tensor</span><span class="o">.</span><span class="n">to_specimen_frame</span><span class="p">(</span><span class="n">orientations</span><span class="p">)</span>
<span class="n">specimen_frame_stiffnesses</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Order4SymmetricTensor([[[297421.83677976 122829.68351071 109748.47970952   8835.33497172
   -26998.72759595   1471.741323  ]
  [122829.68351071 296102.93493471 111067.38155458  -2540.01408675
    28976.79034122  -6764.7103441 ]
  [109748.47970952 111067.38155458 309184.1387359   -6295.32088497
    -1978.06274526   5292.9690211 ]
  [  8835.33497172  -2540.01408675  -6295.32088497 142134.76310916
     7485.38857487  40979.36989459]
  [-26998.72759595  28976.79034122  -1978.06274527   7485.38857487
   139496.95941904  12495.05054512]
  [  1471.741323    -6764.7103441    5292.9690211   40979.36989459
    12495.05054512 165659.36702143]]

 [[285718.13646618 117937.42298519 126344.44054864 -23393.71480883
   -19950.43447932 -17897.75607178]
  [117937.42298519 303682.49640214 108380.08061267  -4662.54050551
    12897.40367901  16581.77746823]
  [126344.44054864 108380.08061267 295275.47883869  28056.25531434
     7053.03080031   1315.97860355]
  [-23393.71480883  -4662.54050551  28056.25531434 136760.16122534
     1861.07478893  18239.68320226]
  [-19950.43447932  12897.40367901   7053.03080031   1861.07478893
   172688.88109728 -33083.70875693]
  [-17897.75607178  16581.77746823   1315.97860355  18239.68320226
   -33083.70875693 155874.84597037]]], dims: (points), components shape: (2, 6, 6))
</pre></div>
</div>
</div>
</div>
<p>Now, each point has a different stiffness tensor in the specimen frame due to the different orientations. We also need to transform the Schmid tensor to the specimen frame.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">specimen_frame_schmid_tensors</span> <span class="o">=</span> <span class="n">schmid_tensor</span><span class="o">.</span><span class="n">to_specimen_frame</span><span class="p">(</span><span class="n">orientations</span><span class="p">)</span>
<span class="n">specimen_frame_schmid_tensors</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Order2SymmetricTensor([[[-4.32437959e-01  4.24250732e-01  8.18722684e-03  1.75461340e-01
   -2.30659938e-01 -2.21248748e-01]
  [-1.16720478e-01  4.36211607e-01 -3.19491129e-01 -2.41329995e-01
   -3.54401404e-01  1.00899256e-01]
  [ 3.15717481e-01  1.19608753e-02 -3.27678356e-01 -4.16791336e-01
   -1.23741466e-01  3.22148004e-01]
  [ 2.88175245e-01 -2.15271396e-02 -2.66648105e-01 -1.21461506e-01
    5.11572165e-01  2.62547940e-01]
  [-2.10603918e-01 -3.08881707e-02  2.41492089e-01 -9.90838735e-02
   -4.74930712e-01  4.01243924e-01]
  [ 7.75713270e-02 -5.24153103e-02 -2.51560167e-02 -2.20545379e-01
    3.66414530e-02  6.63791864e-01]
  [-2.50516875e-02  4.49636539e-02 -1.99119663e-02 -4.00009856e-01
    5.79495927e-01 -3.36270980e-02]
  [ 2.75422361e-02  3.34880149e-02 -6.10302510e-02 -2.95329830e-01
   -6.35313632e-01  5.96000638e-02]
  [ 2.49054854e-03  7.84516688e-02 -8.09422174e-02 -6.95339686e-01
   -5.58177043e-02  2.59729657e-02]
  [-1.19211027e-01  3.57759939e-01 -2.38548912e-01  4.54009691e-01
   -2.98583700e-01  7.49262904e-02]
  [-3.54866632e-01  3.71835422e-01 -1.69687899e-02 -4.50840389e-02
   -1.94018485e-01  4.42543116e-01]
  [-2.35655605e-01  1.40754832e-02  2.21580122e-01 -4.99093730e-01
    1.04565215e-01  3.67616826e-01]]

 [[-2.33531580e-01  2.33264166e-01  2.67413576e-04  5.52762887e-02
    1.13142049e-02 -6.22789916e-01]
  [-1.32771370e-01  1.35533242e-01 -2.76187141e-03 -5.64678979e-01
   -1.41856149e-01 -3.53566627e-01]
  [ 1.00760209e-01 -9.77309242e-02 -3.02928498e-03 -6.19955267e-01
   -1.53170354e-01  2.69223289e-01]
  [ 2.01310122e-01  1.07403781e-01 -3.08713902e-01 -2.37866729e-01
    2.50018240e-01  4.83264616e-01]
  [-4.58843291e-01  1.92472204e-02  4.39596071e-01 -1.32962310e-01
   -2.78100063e-01  2.87932758e-02]
  [-2.57533169e-01  1.26651001e-01  1.30882168e-01 -3.70829038e-01
   -2.80818236e-02  5.12057891e-01]
  [ 1.47672198e-01 -7.26577715e-02 -7.50144264e-02 -1.76968769e-01
    6.35036751e-01  1.80823079e-01]
  [-1.00549912e-01 -2.05134705e-01  3.05684617e-01 -3.82088539e-01
   -4.03188594e-01 -2.14041327e-01]
  [ 4.71222855e-02 -2.77792476e-01  2.30670191e-01 -5.59057308e-01
    2.31848157e-01 -3.32182481e-02]
  [-1.79893656e-01  4.13325718e-01 -2.33432062e-01 -5.62167097e-03
   -3.73704306e-01 -3.20348379e-01]
  [-4.91064749e-01  3.59915167e-01  1.31149582e-01 -3.15552750e-01
   -1.67676186e-02 -1.10732025e-01]
  [-3.11171093e-01 -5.34105511e-02  3.64581644e-01 -3.09931079e-01
    3.56936688e-01  2.09616354e-01]]], dims: (points, slip systems), components shape: (2, 12, 6))
</pre></div>
</div>
</div>
</div>
<p>The constitutive law calculation can now be carried out exactly as before.</p>
<p>Other things…</p>
<p>The user can specify whether they want a <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> to have a “points” or “slip systems” dimension. Materialite assumes there is a “points” dimension unless the user specifies otherwise.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;tensor with points dimension:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Order2Tensor</span><span class="p">(</span><span class="n">displacement_gradients_array</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;tensor with slip systems dimension:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Order2Tensor</span><span class="p">(</span><span class="n">displacement_gradients_array</span><span class="p">,</span> <span class="s2">&quot;s&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>tensor with points dimension:
Order2Tensor([[[ 0.      0.001   0.    ]
  [ 0.      0.      0.    ]
  [ 0.      0.      0.    ]]

 [[-0.0003  0.      0.    ]
  [ 0.     -0.0003  0.    ]
  [ 0.      0.      0.001 ]]], dims: (points), components shape: (2, 3, 3))
tensor with slip systems dimension:
Order2Tensor([[[ 0.      0.001   0.    ]
  [ 0.      0.      0.    ]
  [ 0.      0.      0.    ]]

 [[-0.0003  0.      0.    ]
  [ 0.     -0.0003  0.    ]
  [ 0.      0.      0.001 ]]], dims: (slip systems), components shape: (2, 3, 3))
</pre></div>
</div>
</div>
</div>
<p>If the user passes a single tensor to the constructor but asks for a “points” or “slip systems” dimension, Materialite raises an error.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">_</span> <span class="o">=</span> <span class="n">Order2Tensor</span><span class="p">(</span><span class="n">displacement_gradient_array</span><span class="p">,</span> <span class="s2">&quot;p&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Message: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Error: ValueError
Message: tried to create &lt;class &#39;materialite.tensor.Order2Tensor&#39;&gt; with dimensions pij but components have shape (3, 3)
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">mean()</span></code> and <code class="docutils literal notranslate"><span class="pre">sum()</span></code> (for all <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>s) and <code class="docutils literal notranslate"><span class="pre">max()</span></code> (for <code class="docutils literal notranslate"><span class="pre">Scalars</span></code>) automatically operate over the “slip systems” dimension if it exists. Otherwise, they operate over the “points” dimension. The user can also specify which dimension to act on.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">plastic_slip_rates</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">plastic_slip_rates</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="s2">&quot;s&quot;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">plastic_slip_rates</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Scalar([0.0001286  0.00459837], dims: (points), components shape: (2,))
Scalar([0.0001286  0.00459837], dims: (points), components shape: (2,))
Scalar([ 1.28600823e-004  1.28600823e-004  3.12825484e-168  4.59837222e-003
 -1.28600823e-004  3.12825484e-168  4.59837222e-003 -1.28600823e-004
  3.12825484e-168  1.28600823e-004  1.28600823e-004  3.12825484e-168], dims: (slip systems), components shape: (12,))
</pre></div>
</div>
</div>
</div>
<p>Tensors can be added as fields to a material</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">material</span> <span class="o">=</span> <span class="n">Material</span><span class="p">(</span><span class="n">dimensions</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="n">stiffness_tensor</span> <span class="o">=</span> <span class="n">Order4SymmetricTensor</span><span class="o">.</span><span class="n">from_cubic_constants</span><span class="p">(</span>
    <span class="n">C11</span><span class="o">=</span><span class="mi">250000</span><span class="p">,</span> <span class="n">C12</span><span class="o">=</span><span class="mi">140000</span><span class="p">,</span> <span class="n">C44</span><span class="o">=</span><span class="mi">100000</span>
<span class="p">)</span>
<span class="n">orientations</span> <span class="o">=</span> <span class="n">Orientation</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">num</span><span class="o">=</span><span class="n">material</span><span class="o">.</span><span class="n">num_points</span><span class="p">)</span>
<span class="n">strain</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">Order2SymmetricTensor</span><span class="o">.</span><span class="n">from_cartesian</span><span class="p">([[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span> <span class="o">*</span> <span class="mf">0.001</span>
<span class="p">)</span>
<span class="n">stresses</span> <span class="o">=</span> <span class="n">stiffness_tensor</span><span class="o">.</span><span class="n">to_specimen_frame</span><span class="p">(</span><span class="n">orientations</span><span class="p">)</span> <span class="o">@</span> <span class="n">strain</span>
<span class="n">material</span> <span class="o">=</span> <span class="n">material</span><span class="o">.</span><span class="n">create_fields</span><span class="p">({</span><span class="s2">&quot;orientation&quot;</span><span class="p">:</span> <span class="n">orientations</span><span class="p">,</span> <span class="s2">&quot;stress&quot;</span><span class="p">:</span> <span class="n">stresses</span><span class="p">})</span>
<span class="n">material</span><span class="o">.</span><span class="n">get_fields</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>x</th>
      <th>y</th>
      <th>z</th>
      <th>x_id</th>
      <th>y_id</th>
      <th>z_id</th>
      <th>orientation</th>
      <th>stress</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>Orientation([-2.036  2.184  1.613], dims: (), ...</td>
      <td>Order2SymmetricTensor([304.53444277 116.148556...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>Orientation([-2.009  1.7   -1.147], dims: (), ...</td>
      <td>Order2SymmetricTensor([278.21973763 116.136367...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>Orientation([ 2.524  1.424 -1.426], dims: (), ...</td>
      <td>Order2SymmetricTensor([289.82854061 102.123827...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>Orientation([-2.622  1.152  1.322], dims: (), ...</td>
      <td>Order2SymmetricTensor([279.49095456 117.212460...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>Orientation([2.503 1.231 0.722], dims: (), Eul...</td>
      <td>Order2SymmetricTensor([303.00738352 115.532819...</td>
    </tr>
    <tr>
      <th>5</th>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>Orientation([-0.185  0.907  2.698], dims: (), ...</td>
      <td>Order2SymmetricTensor([288.55061702 121.940875...</td>
    </tr>
    <tr>
      <th>6</th>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>Orientation([3.    2.536 1.418], dims: (), Eul...</td>
      <td>Order2SymmetricTensor([251.39330778 139.712603...</td>
    </tr>
    <tr>
      <th>7</th>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>Orientation([ 0.1    1.644 -2.02 ], dims: (), ...</td>
      <td>Order2SymmetricTensor([279.37375665 138.061701...</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">extracted_stresses</span> <span class="o">=</span> <span class="n">material</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="s2">&quot;stress&quot;</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">stresses</span><span class="o">.</span><span class="n">components</span><span class="p">,</span> <span class="n">extracted_stresses</span><span class="o">.</span><span class="n">components</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>You can index <code class="docutils literal notranslate"><span class="pre">Tensor</span></code>s like numpy arrays.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">specimen_frame_schmid_tensors</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Order2SymmetricTensor([[-0.43243796  0.42425073  0.00818723  0.17546134 -0.23065994 -0.22124875]
 [-0.11672048  0.43621161 -0.31949113 -0.24133    -0.3544014   0.10089926]
 [ 0.31571748  0.01196088 -0.32767836 -0.41679134 -0.12374147  0.322148  ]
 [ 0.28817524 -0.02152714 -0.26664811 -0.12146151  0.51157217  0.26254794]
 [-0.21060392 -0.03088817  0.24149209 -0.09908387 -0.47493071  0.40124392]
 [ 0.07757133 -0.05241531 -0.02515602 -0.22054538  0.03664145  0.66379186]
 [-0.02505169  0.04496365 -0.01991197 -0.40000986  0.57949593 -0.0336271 ]
 [ 0.02754224  0.03348801 -0.06103025 -0.29532983 -0.63531363  0.05960006]
 [ 0.00249055  0.07845167 -0.08094222 -0.69533969 -0.0558177   0.02597297]
 [-0.11921103  0.35775994 -0.23854891  0.45400969 -0.2985837   0.07492629]
 [-0.35486663  0.37183542 -0.01696879 -0.04508404 -0.19401848  0.44254312]
 [-0.23565561  0.01407548  0.22158012 -0.49909373  0.10456522  0.36761683]], dims: (slip systems), components shape: (12, 6))
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">specimen_frame_schmid_tensors</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Order2SymmetricTensor([-0.11672048  0.43621161 -0.31949113 -0.24133    -0.3544014   0.10089926], dims: (), components shape: (6,))
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">specimen_frame_schmid_tensors</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Order2SymmetricTensor([[-0.11672048  0.43621161 -0.31949113 -0.24133    -0.3544014   0.10089926]
 [-0.13277137  0.13553324 -0.00276187 -0.56467898 -0.14185615 -0.35356663]], dims: (points), components shape: (2, 6))
</pre></div>
</div>
</div>
</div>
<p>However, you <em>cannot</em> pull off particular tensor components or an error will be raised.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">specimen_frame_schmid_tensors</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Message: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Error: ValueError
Message: Provided 3 indices to Order2SymmetricTensor with dimensions (points, slip systems)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">specimen_frame_schmid_tensors</span><span class="o">.</span><span class="n">components</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>np.float64(-0.11672047803646295)
</pre></div>
</div>
</div>
</div>
<p>You can also set elements of a tensor with another tensor of the same type</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">new_stiffnesses</span> <span class="o">=</span> <span class="n">specimen_frame_stiffnesses</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">new_stiffnesses</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">specimen_frame_stiffnesses</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">new_stiffnesses</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Order4SymmetricTensor([[[297421.83677976 122829.68351071 109748.47970952   8835.33497172
   -26998.72759595   1471.741323  ]
  [122829.68351071 296102.93493471 111067.38155458  -2540.01408675
    28976.79034122  -6764.7103441 ]
  [109748.47970952 111067.38155458 309184.1387359   -6295.32088497
    -1978.06274526   5292.9690211 ]
  [  8835.33497172  -2540.01408675  -6295.32088497 142134.76310916
     7485.38857487  40979.36989459]
  [-26998.72759595  28976.79034122  -1978.06274527   7485.38857487
   139496.95941904  12495.05054512]
  [  1471.741323    -6764.7103441    5292.9690211   40979.36989459
    12495.05054512 165659.36702143]]

 [[297421.83677976 122829.68351071 109748.47970952   8835.33497172
   -26998.72759595   1471.741323  ]
  [122829.68351071 296102.93493471 111067.38155458  -2540.01408675
    28976.79034122  -6764.7103441 ]
  [109748.47970952 111067.38155458 309184.1387359   -6295.32088497
    -1978.06274526   5292.9690211 ]
  [  8835.33497172  -2540.01408675  -6295.32088497 142134.76310916
     7485.38857487  40979.36989459]
  [-26998.72759595  28976.79034122  -1978.06274527   7485.38857487
   139496.95941904  12495.05054512]
  [  1471.741323    -6764.7103441    5292.9690211   40979.36989459
    12495.05054512 165659.36702143]]], dims: (points), components shape: (2, 6, 6))
</pre></div>
</div>
</div>
</div>
<p>Like numpy arrays, creating an instance of a <code class="docutils literal notranslate"><span class="pre">Tensor</span></code> with another tensor returns a copy of that tensor.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">vector1</span> <span class="o">=</span> <span class="n">Vector</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]])</span>
<span class="n">vector2</span> <span class="o">=</span> <span class="n">Vector</span><span class="p">(</span><span class="n">vector1</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">array_equal</span><span class="p">(</span><span class="n">vector1</span><span class="o">.</span><span class="n">components</span><span class="p">,</span> <span class="n">vector2</span><span class="o">.</span><span class="n">components</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>Confirm that we made a copy of the original <code class="docutils literal notranslate"><span class="pre">Vector</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">vector2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">vector1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">np</span><span class="o">.</span><span class="n">array_equal</span><span class="p">(</span><span class="n">vector1</span><span class="o">.</span><span class="n">components</span><span class="p">,</span> <span class="n">vector2</span><span class="o">.</span><span class="n">components</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>False
</pre></div>
</div>
</div>
</div>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./demos"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="regional_fields.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Regional Fields</p>
      </div>
    </a>
    <a class="right-next"
       href="crystallography.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Crystallography</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By NASA
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>